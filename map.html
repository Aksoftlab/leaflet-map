<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Custom Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="leaflet.css" />
  <style>
    html, body, #map { height: 100%; margin: 0; padding: 0; }
    .leaflet-control-layers {
      background-color: white;
      padding: 5px;
    }
    #myLocationBtn {
      position: absolute;
      bottom: 10px;
      left: 10px;
      z-index: 1000;
      background-color: white;
      border: 2px solid gray;
      border-radius: 8px;
      padding: 6px;
      cursor: pointer;
      box-shadow: 0 0 6px rgba(0,0,0,0.3);
    }
    #myLocationBtn img {
      width: 24px;
      height: 24px;
    }
  </style>
</head>
<body>

<div id="map"></div>
<div id="myLocationBtn" title="My Location">
  <img src="my_location_icon.png" />
</div>

<script src="leaflet.js"></script>
<script>
  var map = L.map('map').setView([28.0, 78.0], 13);
  var shouldAutoCenter = false;

  var osmLayer = L.tileLayer('tiles/osm/{z}/{x}/{y}.png', {
    attribution: 'OSM',
    maxZoom: 19
  }).addTo(map);

  var satelliteLayer = L.tileLayer('tiles/satellite/{z}/{x}/{y}.jpg', {
    attribution: 'Satellite',
    maxZoom: 19
  });

  var baseMaps = {
    "‡§∏‡•ú‡§ï ‡§®‡§ï‡•ç‡§∂‡§æ": osmLayer,
    "‡§∏‡•à‡§ü‡•á‡§≤‡§æ‡§á‡§ü ‡§¶‡•É‡§∂‡•ç‡§Ø": satelliteLayer
  };

  L.control.layers(baseMaps).addTo(map);

  // ‡§™‡§ø‡§® ‡§ú‡•ã‡§°‡§º‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§Ç‡§°‡•ç‡§∞‡•â‡§á‡§° ‡§∏‡•á ‡§ï‡•â‡§≤ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§®
  var markers = [];

  function addMarker(lat, lng, label, status) {
    var icon = L.icon({
      iconUrl: 'https://cdn-icons-png.flaticon.com/512/1161/1161225.png',
      iconSize: [32, 32],
      iconAnchor: [16, 32],
      popupAnchor: [0, -32]
    });

    var marker = L.marker([lat, lng], { icon: icon })
      .bindPopup("<b>" + label + "</b><br>Status: " + status)
      .addTo(map);

    markers.push({ lat: lat, lng: lng, marker: marker });
  }

  function removeMarkerByLatLng(lat, lng) {
    for (var i = 0; i < markers.length; i++) {
      var m = markers[i];
      if (m.lat == lat && m.lng == lng) {
        map.removeLayer(m.marker);
        markers.splice(i, 1);
        break;
      }
    }
  }

  // üìç ‡§Ø‡•Ç‡§ú‡§º‡§∞ ‡§≤‡•ã‡§ï‡•á‡§∂‡§®
  var myLocationMarker = null;

  function updateLocation(lat, lng) {
    if (myLocationMarker == null) {
      myLocationMarker = L.marker([lat, lng], {
        icon: L.icon({
          iconUrl: 'my_location_icon.png',
          iconSize: [24, 24],
          iconAnchor: [12, 12]
        })
      }).addTo(map);
    } else {
      myLocationMarker.setLatLng([lat, lng]);
    }

    if (shouldAutoCenter) {
      map.setView([lat, lng], 16);
      shouldAutoCenter = false;
    }
  }

  document.getElementById("myLocationBtn").onclick = function() {
    shouldAutoCenter = true;
    if (myLocationMarker) {
      map.setView(myLocationMarker.getLatLng(), 16);
    }
  };

  // ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§™‡•ç‡§µ‡§æ‡§á‡§Ç‡§ü ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç
  map.on('click', function(e) {
    var lat = e.latlng.lat.toFixed(6);
    var lng = e.latlng.lng.toFixed(6);
    L.popup().setLatLng(e.latlng).setContent("Lat: " + lat + "<br>Lng: " + lng).openOn(map);
    if (window.AndroidInterface && AndroidInterface.setLatLng) {
      AndroidInterface.setLatLng(lat, lng);
    }
  });

</script>
</body>
</html>
